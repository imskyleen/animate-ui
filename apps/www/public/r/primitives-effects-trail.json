{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "primitives-effects-trail",
  "type": "registry:ui",
  "title": "Trail",
  "description": "An effect that creates a trail that follows the cursor movement.",
  "dependencies": [
    "motion"
  ],
  "files": [
    {
      "path": "registry/primitives/effects/trail/index.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\n\ntype TrailProps = {\n  trailLength?: number;\n  thickness?: number;\n  glow?: number;\n  speed?: number;\n  opacity?: number;\n} & React.ComponentProps<'div'>;\n\ntype Point = { x: number; y: number };\n\nfunction Trail({\n  trailLength = 24,\n  thickness = 6,\n  glow = 12,\n  speed = 0.22,\n  opacity = 0.8,\n  style,\n  ...props\n}: TrailProps) {\n  const [points, setPoints] = React.useState<Point[]>([]);\n  const [mouse, setMouse] = React.useState<Point>({ x: 0, y: 0 });\n  const rafRef = React.useRef<number | null>(null);\n  const containerRef = React.useRef<HTMLDivElement | null>(null);\n\n  React.useEffect(() => {\n    const onMove = (e: MouseEvent) => {\n      setMouse({ x: e.clientX, y: e.clientY });\n    };\n    window.addEventListener('mousemove', onMove, { passive: true });\n    return () => window.removeEventListener('mousemove', onMove);\n  }, []);\n\n  React.useEffect(() => {\n    let running = true;\n    const animate = () => {\n      setPoints((prev) => {\n        const next = prev.length\n          ? [...prev]\n          : Array(trailLength).fill({ x: mouse.x, y: mouse.y });\n        for (let i = next.length - 1; i > 0; i--) {\n          next[i] = {\n            x: next[i].x + (next[i - 1].x - next[i].x) * speed,\n            y: next[i].y + (next[i - 1].y - next[i].y) * speed,\n          };\n        }\n        next[0] = { x: mouse.x, y: mouse.y };\n        return next;\n      });\n      if (running) rafRef.current = requestAnimationFrame(animate);\n    };\n    rafRef.current = requestAnimationFrame(animate);\n    return () => {\n      running = false;\n      if (rafRef.current) cancelAnimationFrame(rafRef.current);\n    };\n  }, [mouse.x, mouse.y, trailLength, speed]);\n\n  React.useEffect(() => {\n    const el = containerRef.current;\n    if (!el) return;\n    if (el.parentNode !== document.body) document.body.appendChild(el);\n    return () => {\n      if (el.parentNode === document.body) document.body.removeChild(el);\n    };\n  }, []);\n\n  const getPath = (pts: Point[]) => {\n    if (!pts.length) return '';\n    const d0 = `M${pts[0].x},${pts[0].y}`;\n    if (pts.length < 2) return d0;\n    let d = d0;\n    for (let i = 0; i < pts.length - 1; i++) {\n      const p0 = pts[i - 1] || pts[i];\n      const p1 = pts[i];\n      const p2 = pts[i + 1];\n      const p3 = pts[i + 2] || p2;\n      const c1x = p1.x + (p2.x - p0.x) / 6;\n      const c1y = p1.y + (p2.y - p0.y) / 6;\n      const c2x = p2.x - (p3.x - p1.x) / 6;\n      const c2y = p2.y - (p3.y - p1.y) / 6;\n      d += ` C${c1x},${c1y} ${c2x},${c2y} ${p2.x},${p2.y}`;\n    }\n    return d;\n  };\n\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        background: 'transparent',\n        pointerEvents: 'none',\n        position: 'fixed',\n        inset: 0,\n        zIndex: 9999,\n        width: '100%',\n        height: '100%',\n        ...style,\n      }}\n      {...props}\n    >\n      <svg\n        style={{\n          pointerEvents: 'none',\n          position: 'absolute',\n          inset: 0,\n          width: '100%',\n          height: '100%',\n        }}\n      >\n        <path\n          d={getPath(points)}\n          stroke=\"currentColor\"\n          strokeWidth={thickness}\n          strokeLinecap=\"round\"\n          fill=\"none\"\n          opacity={opacity}\n          style={{\n            filter: `drop-shadow(0 0 ${glow}px currentColor)`,\n          }}\n        />\n      </svg>\n    </div>\n  );\n}\n\nexport { Trail, type TrailProps };\n",
      "type": "registry:ui",
      "target": "components/animate-ui/primitives/effects/trail.tsx"
    }
  ]
}