{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "primitives-base-preview-link-card",
  "title": "Base Preview Link Card",
  "description": "Displays a preview image of a link when hovered.",
  "dependencies": [
    "motion",
    "@base-ui-components/react"
  ],
  "registryDependencies": [
    "@animate-ui/primitives-base-preview-card",
    "@animate-ui/lib-get-strict-context"
  ],
  "files": [
    {
      "path": "registry/primitives/base/preview-link-card/index.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\n\nimport {\n  PreviewCard as PreviewCardPrimitive,\n  PreviewCardTrigger as PreviewCardTriggerPrimitive,\n  PreviewCardPortal as PreviewCardPortalPrimitive,\n  PreviewCardArrow as PreviewCardArrowPrimitive,\n  PreviewCardPositioner as PreviewCardPositionerPrimitive,\n  PreviewCardPopup as PreviewCardPopupPrimitive,\n  PreviewCardBackdrop as PreviewCardBackdropPrimitive,\n  type PreviewCardProps as PreviewCardPropsPrimitive,\n  type PreviewCardTriggerProps as PreviewCardTriggerPropsPrimitive,\n  type PreviewCardPortalProps as PreviewCardPortalPropsPrimitive,\n  type PreviewCardPositionerProps as PreviewCardPositionerPropsPrimitive,\n  type PreviewCardPopupProps as PreviewCardPopupPropsPrimitive,\n  type PreviewCardArrowProps as PreviewCardArrowPropsPrimitive,\n  type PreviewCardBackdropProps as PreviewCardBackdropPropsPrimitive,\n} from '@/components/animate-ui/primitives/base/preview-card';\nimport { getStrictContext } from '@/lib/get-strict-context';\n\ntype PreviewLinkCardContextType = {\n  href: string;\n  src?: string;\n  width?: number;\n  height?: number;\n};\n\nconst [PreviewLinkCardProvider, usePreviewLinkCard] =\n  getStrictContext<PreviewLinkCardContextType>('PreviewLinkCardContext');\n\ntype PreviewLinkCardProps = PreviewCardPropsPrimitive & {\n  href: string;\n  src?: string;\n  width?: number;\n  height?: number;\n  deviceScaleFactor?: number;\n  colorScheme?: 'light' | 'dark';\n};\n\nfunction PreviewLinkCard({\n  href,\n  src,\n  width = 240,\n  height = 135,\n  deviceScaleFactor = 1,\n  colorScheme = 'light',\n  ...props\n}: PreviewLinkCardProps) {\n  const imageSrc =\n    src ??\n    `https://api.microlink.io/?${buildQueryString({\n      url: href,\n      screenshot: true,\n      meta: false,\n      embed: 'screenshot.url',\n      colorScheme,\n      'viewport.isMobile': true,\n      'viewport.deviceScaleFactor': deviceScaleFactor,\n      'viewport.width': width * 3,\n      'viewport.height': height * 3,\n    })}`;\n\n  React.useEffect(() => {\n    const link = document.createElement('link');\n    link.rel = 'preload';\n    link.as = 'image';\n    link.href = imageSrc;\n    document.head.appendChild(link);\n    return () => {\n      document.head.removeChild(link);\n    };\n  }, [imageSrc]);\n\n  return (\n    <PreviewLinkCardProvider value={{ href, src: imageSrc, width, height }}>\n      <PreviewCardPrimitive data-slot=\"preview-link-card\" {...props} />\n    </PreviewLinkCardProvider>\n  );\n}\n\ntype PreviewLinkCardTriggerProps = PreviewCardTriggerPropsPrimitive &\n  React.ComponentProps<'a'>;\n\nfunction PreviewLinkCardTrigger({\n  children,\n  href: hrefProp,\n  render,\n  ...props\n}: PreviewLinkCardTriggerProps) {\n  const { href } = usePreviewLinkCard();\n\n  return (\n    <PreviewCardTriggerPrimitive\n      data-slot=\"preview-link-card-trigger\"\n      render={render ?? <a href={hrefProp ?? href}>{children}</a>}\n      {...props}\n    />\n  );\n}\n\ntype PreviewLinkCardPortalProps = PreviewCardPortalPropsPrimitive;\n\nfunction PreviewLinkCardPortal(props: PreviewLinkCardPortalProps) {\n  return (\n    <PreviewCardPortalPrimitive\n      data-slot=\"preview-link-card-portal\"\n      {...props}\n    />\n  );\n}\n\ntype PreviewLinkCardPositionerProps = PreviewCardPositionerPropsPrimitive;\n\nfunction PreviewLinkCardPositioner({\n  side = 'top',\n  sideOffset = 10,\n  align = 'center',\n  ...props\n}: PreviewLinkCardPositionerProps) {\n  return (\n    <PreviewCardPositionerPrimitive\n      data-slot=\"preview-link-card-positioner\"\n      side={side}\n      sideOffset={sideOffset}\n      align={align}\n      {...props}\n    />\n  );\n}\n\nfunction buildQueryString(\n  params: Record<string, string | number | boolean | undefined | null>,\n) {\n  const sp = new URLSearchParams();\n  for (const [k, v] of Object.entries(params)) {\n    if (v === undefined || v === null) continue;\n    sp.append(k, String(v));\n  }\n  return sp.toString();\n}\n\ntype PreviewLinkCardPopupProps = PreviewCardPopupPropsPrimitive &\n  React.ComponentProps<'a'>;\n\nfunction PreviewLinkCardPopup({\n  transition = { type: 'spring', stiffness: 300, damping: 25 },\n  href: hrefProp,\n  style,\n  children,\n  ...props\n}: PreviewLinkCardPopupProps) {\n  const { href } = usePreviewLinkCard();\n\n  return (\n    <PreviewCardPopupPrimitive\n      data-slot=\"preview-link-card-popup\"\n      transition={transition}\n    >\n      <a\n        data-slot=\"preview-link-card-popup-link\"\n        style={{\n          display: 'block',\n          ...style,\n        }}\n        href={hrefProp ?? href}\n        {...props}\n      >\n        {children}\n      </a>\n    </PreviewCardPopupPrimitive>\n  );\n}\n\ntype PreviewLinkCardImageProps = Omit<\n  React.ComponentProps<'img'>,\n  'src' | 'width' | 'height'\n>;\n\nfunction PreviewLinkCardImage({\n  alt = 'preview image',\n  ...props\n}: PreviewLinkCardImageProps) {\n  const { src, width, height } = usePreviewLinkCard();\n\n  return <img src={src} width={width} height={height} alt={alt} {...props} />;\n}\n\ntype PreviewLinkCardBackdropProps = PreviewCardBackdropPropsPrimitive;\n\nfunction PreviewLinkCardBackdrop(props: PreviewLinkCardBackdropProps) {\n  return (\n    <PreviewCardBackdropPrimitive\n      data-slot=\"preview-link-card-backdrop\"\n      {...props}\n    />\n  );\n}\n\ntype PreviewLinkCardArrowProps = PreviewCardArrowPropsPrimitive;\n\nfunction PreviewLinkCardArrow(props: PreviewLinkCardArrowProps) {\n  return (\n    <PreviewCardArrowPrimitive data-slot=\"preview-link-card-arrow\" {...props} />\n  );\n}\n\nexport {\n  PreviewLinkCard,\n  PreviewLinkCardTrigger,\n  PreviewLinkCardPortal,\n  PreviewLinkCardPositioner,\n  PreviewLinkCardPopup,\n  PreviewLinkCardImage,\n  PreviewLinkCardBackdrop,\n  PreviewLinkCardArrow,\n  usePreviewLinkCard,\n  type PreviewLinkCardProps,\n  type PreviewLinkCardTriggerProps,\n  type PreviewLinkCardPortalProps,\n  type PreviewLinkCardPositionerProps,\n  type PreviewLinkCardPopupProps,\n  type PreviewLinkCardImageProps,\n  type PreviewLinkCardBackdropProps,\n  type PreviewLinkCardArrowProps,\n  type PreviewLinkCardContextType,\n};\n",
      "type": "registry:ui",
      "target": "components/animate-ui/primitives/base/preview-link-card.tsx"
    }
  ],
  "type": "registry:ui"
}